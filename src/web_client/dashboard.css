*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

html {
  font-size: 14px; /* or 15/16 if you want larger */
}

body {
  margin: 0;
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  line-height: 1.4;
  display: flex;
  flex-direction: column;
  padding-block: 5vh;
  background: #fff;
  cursor: default;
  overflow: hidden;
}

.dashboard {
  display: grid;
  grid-template-columns: clamp(10%, 12%, 15%) 1fr 1fr;
  width: 100%;
  flex: 1 1 auto;
  min-height: 0;
  grid-auto-rows: minmax(0, auto);
}

.dashboard > .nav-col {
  grid-column: 1;
  grid-row: 1 / -1;           /* span all rows */
  min-width: 0;
}

/* All left/right panels go to fixed columns */
.dashboard > .panel[data-slot="left"]  { grid-column: 2; min-width: 0; }
.dashboard > .panel[data-slot="right"] { grid-column: 3; min-width: 0; }
.dashboard > .panel[data-slot="span"]  { grid-column: 2 / 4; min-width: 0; }

/* --- replace this line (remove it):
.panel + .panel { border-left: 1px solid #f0f0f0; }
   --- with this: right column always gets the divider --- */
.panel[data-slot="right"] { border-left: 1px solid #f0f0f0; }

/* Ensure spanning panel does NOT show a vertical divider */
.panel[data-slot="span"] { border-left: none; }

/* hidden should truly leave layout (belt & suspenders) */
[hidden] { display: none !important; }

/* utility used by your builder form heading */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0 0 0 0);
  white-space: nowrap; border: 0;
}

.column { display: flex; flex-direction: column; min-width: 0; min-height: 0; }

.column-title {
  margin: 0; padding: 12px; font-size: 1rem; font-weight: 600;
  border-bottom: 1px solid #e9e9e9;
}

.column-content {
  display: flex; flex-direction: column; flex: 1 1 auto;
  overflow: hidden; padding: 8px;
}

.table-scroll { flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; }

.panel-footer { padding-top: 8px; border-top: 1px solid #f0f0f0; background: #fff; }

.nav-col { border-right: 1px solid #f0f0f0; }
.panel + .panel { border-left: 1px solid #f0f0f0; }

/* Buttons */
.add-row-btn, .btn-erase, .btn-forget, .btn {
  display: inline-block; margin: 0; padding: 6px 10px;
  border: 1px solid #ddd; background: #fff; border-radius: 4px;
  font: inherit; cursor: pointer;
}
.add-row-btn:focus, .btn:focus { outline: 2px solid rgba(0, 122, 255, 0.25); }
.btn.primary { border-color: #999; }

button:disabled { opacity: .6; pointer-events: none; }

/* When "armed" via Ctrl */
.btn-armed {
  background: coral;
}

/* When "idling" but still available */
.btn-disarmed {
  opacity: 0.6;
}


/* Tables */
.data-table { width: 100%; border-collapse: collapse; table-layout: fixed; }

.data-table thead th {
  text-align: left; font-weight: 600; padding: 8px;
  border-bottom: 1px solid #e9e9e9;
  position: sticky; top: 0; background: #fff; z-index: 1;
}

/* No row dividers */
.data-table tbody td { padding: 6px 8px; vertical-align: middle; border-bottom: none; }

/* Inputs: square corners, white bg */
.data-table input[type="text"] {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #ddd;
  border-radius: 0;
  font: inherit;
  background: #fff;
}

/* -------- Personal panel: read-mode/edit-mode + visuals -------- */

/* Default: no borders on Field & Value, no focus outline in personal panel */
.panel[data-panel="personal"] tbody input[type="text"] {
  border: none !important;
  outline: none !important;
  background: #fff;
}

/* Show border ONLY while actively editing (Ctrl+Left-click triggers this) */
.panel[data-panel="personal"] tbody input[type="text"].editing {
  border: 1px solid #999 !important;
}

/* Read-mode/edit-mode wrapper + copy-friendly text */
.panel[data-panel="personal"] tbody .cell { position: relative; }
.panel[data-panel="personal"] tbody .cell.read-mode input[type="text"] { display: none; }
.panel[data-panel="personal"] tbody .cell.edit-mode .ro-text { display: none; }

.panel[data-panel="personal"] tbody .ro-text {
  display: block;
  min-height: 1.5em;    /* keeps a line even when empty */
  white-space: pre-wrap;
  user-select: text;     /* allow highlight + copy */
  cursor: default;       /* no I-beam by default */
}

/* When Ctrl is held, hint with caret over the read-mode text layer */
.ctrl-down .panel[data-panel="personal"] tbody .ro-text { cursor: text; }

/* -------- Cursor logic (global & inputs) -------- */

/* Caret for editable inputs; no caret for readonly inputs */
input[type="text"]:not([readonly]) { cursor: text; }
input[type="text"][readonly] { cursor: default; }

/* Also allow caret on readonly personal inputs when Ctrl is held (edge cases) */
.ctrl-down .panel[data-panel="personal"] tbody input[type="text"][readonly] { cursor: text; }

/* -------- Modal (New Item) -------- */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.35);
  display: none; align-items: center; justify-content: center; z-index: 1000;
}
.modal-overlay.open { display: flex; }

.modal {
  background: #fff; width: min(560px, 92vw); max-height: 90vh;
  border: 1px solid #ddd; border-radius: 8px;
  display: flex; flex-direction: column;
}

.modal-title { margin: 0; padding: 14px 16px; border-bottom: 1px solid #eee; font-size: 1.05rem; font-weight: 600; }
.modal-body { padding: 12px 16px; overflow: auto; }
.modal-footer { padding: 12px 16px; display: flex; gap: 8px; justify-content: flex-end; border-top: 1px solid #eee; }

.modal-table tbody th { text-align: left; font-weight: 600; padding: 6px 8px; border: none; width: 45%; }
.modal-table tbody td { padding: 6px 8px; }
.modal-table input[type="text"] { width: 100%; padding: 6px 8px; border: 1px solid #ddd; border-radius: 0; background: #fff; }

.modal-hint { margin: 8px 0 0; font-size: 0.85rem; color: #666; }

/* --- suggestions for inbound editable cells --- */
.inbound-edit-cell { position: relative; }
.inbound-input-wrap { position: relative; }
.suggestbox {
  position: absolute;
  left: 0; right: 0; top: 100%;
  background: #fff;
  border: 1px solid #ddd;
  z-index: 5;
  max-height: 180px;
  overflow: auto;
}
.suggestlist { list-style: none; margin: 0; padding: 0; }
.suggestitem { padding: 6px 8px; cursor: pointer; }
.suggestitem.hot, .suggestitem:hover { background: #f0f6ff; }

.page-meter {
  margin-bottom: 5vh;
  padding-inline: clamp(1rem, 4vw, 2.5rem);
}

.page-meter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /*margin-bottom: 2vh;*/
}

.page-meter meter {
  display: block;
  width: 100%;
}

#app-statusbar {
  display: flex;
  gap: .5rem;
  align-items: center;
  padding: 8px 12px;
  border-top: 1px solid #eee;
  margin-top: 1rem;    /* “a bit more space” above the footer */
}

#app-statusbar .spacer {
  flex: 1;
}

.overview-highlight {
  background-color: rgba(255, 165, 0, 0.12); /* subtle orange-ish */
}