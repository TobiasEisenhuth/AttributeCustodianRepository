*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  line-height: 1.4;
  overflow: hidden;
  padding-block: 5vh;
  background: #fff;
  cursor: default; /* default arrow everywhere unless explicitly editable */
}

/* 3 columns: left (10â€“15%), two equal panels */
.dashboard {
  display: grid;
  grid-template-columns: clamp(10%, 12%, 15%) 1fr 1fr;
  height: calc(100vh - 10vh);
  width: 100vw;
}

.column { display: flex; flex-direction: column; min-width: 0; min-height: 0; }

.column-title {
  margin: 0; padding: 12px; font-size: 1rem; font-weight: 600;
  border-bottom: 1px solid #e9e9e9;
}

.column-content {
  display: flex; flex-direction: column; flex: 1 1 auto;
  overflow: hidden; padding: 8px;
}

.table-scroll { flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; }

.panel-footer { padding-top: 8px; border-top: 1px solid #f0f0f0; background: #fff; }

.nav-col { border-right: 1px solid #f0f0f0; }
.panel + .panel { border-left: 1px solid #f0f0f0; }

/* Buttons */
.add-row-btn, .btn {
  display: inline-block; margin: 0; padding: 6px 10px;
  border: 1px solid #ddd; background: #fff; border-radius: 4px;
  font: inherit; cursor: pointer;
}
.add-row-btn:focus, .btn:focus { outline: 2px solid rgba(0, 122, 255, 0.25); }
.btn.primary { border-color: #999; }

/* Tables */
.data-table { width: 100%; border-collapse: collapse; table-layout: fixed; }

.data-table thead th {
  text-align: left; font-weight: 600; padding: 8px;
  border-bottom: 1px solid #e9e9e9;
  position: sticky; top: 0; background: #fff; z-index: 1;
}

/* No row dividers */
.data-table tbody td { padding: 6px 8px; vertical-align: middle; border-bottom: none; }

/* Inputs: square corners, white bg */
.data-table input[type="text"] {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #ddd;
  border-radius: 0;
  font: inherit;
  background: #fff;
}

/* -------- Personal panel: read-mode/edit-mode + visuals -------- */

/* Default: no borders on Field & Value, no focus outline in personal panel */
.panel[data-panel="personal"] tbody input[type="text"] {
  border: none !important;
  outline: none !important;
  background: #fff;
}

/* Show border ONLY while actively editing (Ctrl+Left-click triggers this) */
.panel[data-panel="personal"] tbody input[type="text"].editing {
  border: 1px solid #999 !important;
}

/* Read-mode/edit-mode wrapper + copy-friendly text */
.panel[data-panel="personal"] tbody .cell { position: relative; }
.panel[data-panel="personal"] tbody .cell.read-mode input[type="text"] { display: none; }
.panel[data-panel="personal"] tbody .cell.edit-mode .ro-text { display: none; }

.panel[data-panel="personal"] tbody .ro-text {
  display: block;
  min-height: 1.5em;    /* keeps a line even when empty */
  white-space: pre-wrap;
  user-select: text;     /* allow highlight + copy */
  cursor: default;       /* no I-beam by default */
}

/* When Ctrl is held, hint with caret over the read-mode text layer */
.ctrl-down .panel[data-panel="personal"] tbody .ro-text { cursor: text; }

/* -------- Cursor logic (global & inputs) -------- */

/* Caret for editable inputs; no caret for readonly inputs */
input[type="text"]:not([readonly]) { cursor: text; }
input[type="text"][readonly] { cursor: default; }

/* Also allow caret on readonly personal inputs when Ctrl is held (edge cases) */
.ctrl-down .panel[data-panel="personal"] tbody input[type="text"][readonly] { cursor: text; }

/* -------- Modal (New Item) -------- */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.35);
  display: none; align-items: center; justify-content: center; z-index: 1000;
}
.modal-overlay.open { display: flex; }

.modal {
  background: #fff; width: min(560px, 92vw); max-height: 90vh;
  border: 1px solid #ddd; border-radius: 8px;
  display: flex; flex-direction: column;
}

.modal-title { margin: 0; padding: 14px 16px; border-bottom: 1px solid #eee; font-size: 1.05rem; font-weight: 600; }
.modal-body { padding: 12px 16px; overflow: auto; }
.modal-footer { padding: 12px 16px; display: flex; gap: 8px; justify-content: flex-end; border-top: 1px solid #eee; }

.modal-table tbody th { text-align: left; font-weight: 600; padding: 6px 8px; border: none; width: 45%; }
.modal-table tbody td { padding: 6px 8px; }
.modal-table input[type="text"] { width: 100%; padding: 6px 8px; border: 1px solid #ddd; border-radius: 0; background: #fff; }

.modal-hint { margin: 8px 0 0; font-size: 0.85rem; color: #666; }
